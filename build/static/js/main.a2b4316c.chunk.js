(this["webpackJsonpcs-frontend"]=this["webpackJsonpcs-frontend"]||[]).push([[0],{241:function(e,t){},243:function(e,t){},266:function(e,t){},268:function(e,t){},296:function(e,t){},297:function(e,t){},302:function(e,t){},304:function(e,t){},311:function(e,t){},330:function(e,t){},369:function(e,t,n){},370:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(37),a=n.n(c),s=(n(106),n(57)),o=n(16),i=n(58),u=n(8),l=n(38),p=n(374),j=n(372),d=n(14),h=n.n(d),b=n(32),f=n(202),m=(n(220),"http://localhost:5000"),O=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get(m+"/users/".concat(t,"/").concat(n)).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get(m+"/users/".concat(t)).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(b.a)(h.a.mark((function e(t,n,r,c){var a,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:"",e.prev=1,e.next=4,f.post(m+"/users",{name:t,family_name:n,email:r,promo_code:a,password:c}).then((function(e){return e}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,r,c){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post(m+"/sendMail",{to:t,subject:n,text:r}).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get(m+"/spare1/".concat(t)).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put(m+"/spare1",{id:t,spare1:n}).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.get(m+"/spare2/".concat(t)).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put(m+"/spare2",{id:t,spare2:n}).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put(m+"/spare1email",{email:t}).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(b.a)(h.a.mark((function e(t,n,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.put(m+"/updatePasswordByToken",{id:t,spare1:n,newPassword:r}).then((function(e){return e}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),A=n(373),P=n(1),E=null,R=function(e,t){var n=e.body,c=e.heading,a=e.type,s=void 0===a?"success":a,o=e.showTime,i=void 0===o?5e3:o,l=Object(r.useState)(!1),p=Object(u.a)(l,2),j=p[0],d=p[1];Object(r.useImperativeHandle)(t,(function(){return{showAlert:function(){d(!0),clearTimeout(E),E=setTimeout((function(){h()}),i)}}}));var h=function(){d(!1)};return Object(P.jsx)(P.Fragment,{children:j&&Object(P.jsxs)(A.a,{variant:s,onClose:h,dismissible:!0,children:[Object(P.jsx)(A.a.Heading,{children:c}),Object(P.jsx)("p",{children:n})]})})},U=Object(r.forwardRef)(R),z=n(60),I=Object(z.b)({name:"global",initialState:{currentUser:null},reducers:{setCurrentUser:function(e,t){e.currentUser=t.payload}}}),T=I.actions.setCurrentUser,D=I.reducer,F=n(56);function L(){var e=Object(o.f)(),t=Object(i.b)(),n=Object(r.useRef)(),c=Object(r.useState)(""),a=Object(u.a)(c,2),s=a[0],d=a[1],h=Object(r.useState)(""),b=Object(u.a)(h,2),f=b[0],m=b[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),w=v[0],y=v[1],k=Object(r.useState)(-1),S=Object(u.a)(k,2),N=S[0],C=S[1],A=Object(r.useState)(-1),E=Object(u.a)(A,2),R=E[0],z=E[1],I=Object(r.useState)(""),D=Object(u.a)(I,2),L=D[0],_=D[1],Q=Object(r.useState)(""),B=Object(u.a)(Q,2),H=B[0],J=B[1],G=Object(r.useState)(!1),q=Object(u.a)(G,2),M=q[0],W=q[1];return Object(P.jsxs)("div",{className:"Login",children:[Object(P.jsx)(l.a,{autoplay:!0,loop:!0,src:"https://assets1.lottiefiles.com/datafiles/RvQQlJ3ODelSiQi/data.json",style:{height:"300px",width:"300px"}}),Object(P.jsx)(U,{body:f,heading:s,type:w,ref:n}),Object(P.jsxs)(p.a,{className:"d-flex flex-column align-items-md-center",onSubmit:function(r){r.preventDefault(),O(L,F(H)).then((function(r){null!=r.data?(console.log("user:",r.data),C(r.data.id),z(r.data.spare2),"Activated"===r.data.spare2?(console.log("log in"),e.push("/dashboard"),t(T(r.data))):(y("info"),d("Activate account"),m("Please check you email for an activation link."),n.current.showAlert(),W(!0))):(y("warning"),d("Log in failed"),m("Password or email are not correct! try again."),n.current.showAlert())}))},children:[Object(P.jsx)("h3",{className:"pt-5 pb-3",children:" Welcome Back!"}),Object(P.jsx)(p.a.Group,{size:"lg",controlId:"email",children:Object(P.jsx)(p.a.Control,{type:"email",placeholder:"Enter email",value:L,onChange:function(e){return _(e.target.value)}})}),Object(P.jsx)(p.a.Group,{size:"lg",controlId:"password",children:Object(P.jsx)(p.a.Control,{type:"password",value:H,placeholder:"Password",onChange:function(e){return J(e.target.value)}})}),Object(P.jsx)(j.a,{className:"mt-3 mb-3",size:"m",type:"submit",disabled:!(L.length>0&&H.length>0),children:"Login"}),Object(P.jsx)(j.a,{className:"mb-3",size:"m",onClick:function(){e.push("/sign-up")},children:"Sign Up"}),M&&Object(P.jsxs)("div",{className:"d-flex flex-column align-items-md-center m-3",children:[Object(P.jsx)("p",{className:"forgot-password text-right m-2",children:"Didn't receive an activation link?"}),Object(P.jsx)(j.a,{className:"mb-3",disabled:0==L.length,size:"m",onClick:function(){var e=R,t="http://localhost:3000/a/".concat(N,"/").concat(e),r=L,c="Click on this link to activate your account: ".concat(t);g(r,"Activation Email",c,(function(e){})),y("success"),d("Success"),m("Check your email for an activation link"),n.current.showAlert()},children:"Resend Activation Link"})]})]})]})}var _=n(56);function Q(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(u.a)(a,2),o=s[0],i=s[1],p=Object(r.useState)(""),j=Object(u.a)(p,2),d=j[0],h=j[1],b=Object(r.useState)(""),f=Object(u.a)(b,2),m=f[0],O=f[1],w=Object(r.useState)(""),y=Object(u.a)(w,2),k=y[0],S=y[1],N=Object(r.useState)(""),C=Object(u.a)(N,2),A=C[0],E=C[1],R=Object(r.useState)(""),z=Object(u.a)(R,2),I=z[0],T=z[1],D=Object(r.useState)(""),F=Object(u.a)(D,2),L=F[0],Q=F[1],B=Object(r.useState)(""),H=Object(u.a)(B,2),J=H[0],G=H[1];var q=Object(r.useRef)();return Object(P.jsxs)("div",{children:[Object(P.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m!==k)return T("warning"),Q("Incorrect Password"),G("Passwords don't match!"),void q.current.showAlert();x(d).then((function(e){0!=e.data.length?(T("warning"),Q("User Exists"),G("There is already an account registered with this email!"),q.current.showAlert()):v(n,o,d,_(m),A).then((function(e){T("success"),Q("Success"),G("Registeration has been completed successfully!"),q.current.showAlert();var t=e.data.id,n=e.data.spare2,r="http://localhost:3000/a/".concat(t,"/").concat(n),c=d,a="Click on this link to activate your account: ".concat(r);g(c,"Activation Email",a,(function(e){})),T("success"),Q("Success"),G("Check your email for an activation link")}))}))},children:[Object(P.jsx)(l.a,{src:"https://assets5.lottiefiles.com/packages/lf20_wd1udlcz.json",background:"transparent",speed:"1",loop:!0,autoplay:!0,style:{height:"300px",width:"300px"}}),Object(P.jsx)(U,{body:J,heading:L,type:I,ref:q}),Object(P.jsxs)("div",{className:" d-flex flex-column align-items-md-center",children:[Object(P.jsx)("h3",{className:"mt-5 mb-5",children:"Sign Up"}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"text",className:"form-control",placeholder:"First name",onChange:function(e){return c(e.target.value)}})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{onChange:function(e){return i(e.target.value)},type:"text",className:"form-control",placeholder:"Last name"})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",onChange:function(e){return h(e.target.value)}})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",onChange:function(e){return O(e.target.value)}})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Repeat password",onChange:function(e){return S(e.target.value)}})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"text",className:"form-control",placeholder:"Have a promo code",onChange:function(e){return E(e.target.value)}})}),Object(P.jsx)("button",{disabled:!(n.length>0&&o.length>0&&d.length>0&&m.length>0&&k.length>0&&A.length>0),type:"submit",className:"btn btn-primary mt-3",children:"Sign Up"}),Object(P.jsx)("p",{className:"forgot-password text-right",children:Object(P.jsx)("a",{href:"/reset-password",children:"Forgot Password?"})}),Object(P.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(P.jsx)("a",{href:"/sign-in",children:"sign in?"})]})]})]}),"       "," "]})}function B(){return Object(P.jsx)("div",{})}var H=n(56);function J(e){var t=e.match,n=Object(r.useRef)(),c=Object(o.f)(),a=Object(r.useState)(!1),s=Object(u.a)(a,2),i=s[0],l=s[1],p=Object(r.useState)(""),j=Object(u.a)(p,2),d=j[0],h=j[1],b=Object(r.useState)(""),f=Object(u.a)(b,2),m=f[0],O=f[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),g=v[0],k=v[1],S=Object(r.useState)(""),N=Object(u.a)(S,2),A=N[0],E=N[1],R=Object(r.useState)(""),z=Object(u.a)(R,2),I=z[0],T=z[1];Object(r.useEffect)((function(){var e=t.params.id,n=t.params.token;console.log(t),w(e).then((function(e){e.data&&(e.data.spare1===n?l(!0):(l(!1),c.push("/404")))}))}),[]);return Object(P.jsxs)("div",{children:[Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r=t.params.id,a=t.params.token;if(d!==m)return k("warning"),E("Incorrect Password"),T("Passwords don't match!"),void n.current.showAlert();C(r,a,H(d)).then((function(e){1==e.data?(k("success"),E("Success"),T("Password has been changed successfuly!"),n.current.showAlert(),l(!1),y(r,null).then((function(e){setTimeout((function(){c.push("/sign-in")}),1e3)}))):(k("warning"),E("Error"),T("Ops, something went wrong!!"),n.current.showAlert())}))},children:[Object(P.jsx)(U,{body:I,heading:A,type:g,ref:n}),i&&Object(P.jsx)("div",{children:Object(P.jsxs)("div",{className:" d-flex flex-column align-items-md-center",children:[Object(P.jsx)("h3",{className:"mt-5 mb-5",children:"Change Password"}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Enter password",onChange:function(e){return h(e.target.value)}})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Repeat password",onChange:function(e){return O(e.target.value)}})}),Object(P.jsx)("button",{disabled:!(d.length>0&&m.length>0),type:"submit",className:"btn btn-primary mt-3",children:"Change Password"})]})})]}),"       "," "]})}function G(){return Object(P.jsx)("div",{children:Object(P.jsx)(l.a,{src:"https://assets7.lottiefiles.com/temp/lf20_USCruP.json",background:"transparent",speed:"1",loop:!0,autoplay:!0,style:{height:"500px",width:"500px"}})})}n(56);function q(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(u.a)(a,2),o=s[0],i=s[1],p=Object(r.useState)(""),j=Object(u.a)(p,2),d=j[0],h=j[1],b=Object(r.useState)(""),f=Object(u.a)(b,2),m=f[0],O=f[1];var x=Object(r.useRef)();return Object(P.jsxs)("div",{children:[Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N(n).then((function(e){if(e.data){var t=e.data.id,r=e.data.spare1,c="http://localhost:3000/ch/".concat(t,"/").concat(r),a=n,s="Click on this link to reset your password: ".concat(c);g(a,"Recovery Email",s,(function(e){})),i("success"),h("Success"),O("Check your email for a reset link"),x.current.showAlert()}else console.log("email is not valid, don't tell the user..."),i("success"),h("Success"),O("Check your email for a reset link")}))},children:[Object(P.jsx)(l.a,{src:"https://assets4.lottiefiles.com/packages/lf20_IQ2Fuq.json",background:"transparent",speed:"1",loop:!0,autoplay:!0,style:{height:"300px",width:"300px"}}),Object(P.jsx)(U,{body:m,heading:d,type:o,ref:x}),Object(P.jsxs)("div",{className:" d-flex flex-column align-items-md-center",children:[Object(P.jsx)("h3",{className:"mt-5 mb-5",children:"Reset Password"}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter email",onChange:function(e){return c(e.target.value)}})}),Object(P.jsx)("button",{disabled:!(n.length>0),type:"submit",className:"btn btn-primary mt-3",children:"Send reset email"}),Object(P.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(P.jsx)("a",{href:"/sign-in",children:"sign in?"})]})]})]}),"       "," "]})}n(56);function M(e){var t=e.match,n=Object(o.f)(),c=Object(r.useState)(!1),a=Object(u.a)(c,2),s=a[0],i=a[1];return Object(r.useEffect)((function(){var e=t.params.id,r=t.params.token;console.log(e,r),k(e).then((function(t){if(t.data){var c=t.data.spare2;console.log(c,r),c===r?S(e,"Activated").then((function(e){i(!0),setTimeout((function(){n.push("/sign-in")}),2e3)})):(i(!1),n.push("/404"))}}))}),[]),Object(P.jsx)("div",{children:s&&Object(P.jsx)("h3",{children:"Account activated, redirecting..."})})}var W=function(){return Object(P.jsx)(s.a,{children:Object(P.jsx)("div",{className:"App",children:Object(P.jsx)("div",{className:"body",children:Object(P.jsxs)(o.c,{children:[Object(P.jsx)(o.a,{path:"/",exact:!0,component:L}),Object(P.jsx)(o.a,{path:"/ch/:id/:token",exact:!0,component:J}),Object(P.jsx)(o.a,{path:"/a/:id/:token",exact:!0,component:M}),Object(P.jsx)(o.a,{path:"/404",exact:!0,component:G}),Object(P.jsx)(o.a,{path:"/sign-up",exact:!0,component:Q}),Object(P.jsx)(o.a,{path:"/sign-in",exact:!0,component:L}),Object(P.jsx)(o.a,{path:"/reset-password",exact:!0,component:q}),Object(P.jsx)(o.a,{path:"/dashboard",exact:!0,component:B})]})})})})},K=n(39),V=n(191),X=n.n(V),Y=n(102),Z={key:"root",version:1,storage:X.a},$=Object(K.g)(Z,D),ee=Object(z.a)({reducer:$,middleware:Object(z.c)({serializableCheck:{ignoredActions:[K.a,K.f,K.b,K.c,K.d,K.e]}})}),te=n(74),ne=(n(369),Object(te.a)(ee));a.a.render(Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(i.a,{store:ee,children:Object(P.jsx)(Y.a,{loading:null,persistor:ne,children:Object(P.jsx)(W,{})})})}),document.getElementById("root"))}},[[370,1,2]]]);
//# sourceMappingURL=main.a2b4316c.chunk.js.map